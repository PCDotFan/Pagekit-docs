# 商城

<p class="uk-article-lead">在商城发布的主题或扩展可通过 Pagekit 管理接口安装</p>

## 取得 API 接口密钥

首先登录 [Pagekit 网站](http://pagekit.com) 并在“账户设置”中取得您的 *API key* 。
之后回到您的站点中，将密钥粘贴到 *Settings > System* 中提供的文本框。

## 创建程序包

在我们首次上传自制的扩展前，我们需要在商城创建一个程序包。

登录 pagekit.com 并前往 *开发者* 部分部分，点击 *新程序包* 按钮并输入详细资料。

| 字段  | 描述 |
|--------|-------------|
| *名称*           | 填写扩展的名称，必须与本地扩展名相同，保持名称唯一性。 |
| *标题*          | 扩展的标题 |
| *程序包类型*   | 可以为 扩展或主题。 |

点击 *创建* 后就可以看到程序包设置面板了。不用管它，但要注意程序包的 *状态* 默认被设置为
 *未发布* ，我们将会在程序包上传完成后再回到这部分。

## 上传

命令行模式中，使用 `pagekit` 命令行工具来上传你的程序包。本例将使用
 `foobar` 这个扩展名。

```bash
./pagekit extension:upload foobar
```

**注意** 如果执行失败并提示 `Error: package not found` ，请确认扩展名与商城的扩展名一致。

## 另类上传

由于众多原因，你可能更倾向于不使用命令行工具上传你的扩展。此时，你可以手动上传。

1. 制作 *zip压缩文件* 并将扩展的文件添加到压缩文件中。
2. 登录 [pagekit.com](http://pagekit.com) 前往你的扩展并选择 *发布* tab选项卡。
3. Upload the ZIP file and a new, but still unpublished release will be created automatically.

**注意** ZIP压缩文件的根目录下的文件将不算做有效的程序包内容。

## 发布

当一个扩展已经上传成功但还没有被发布或没有发布在商城中时

1. 访问 [pagekit.com](http://pagekit.com) 前往你的扩展并选择 *发布* 选项卡 (如有必要请刷新)。
2. 一个全新发布版本 *0.0.1* 已经可用但仍被标记为
*草稿*。版本号将会从扩展程序包中的 `extension.json` 或主题程序包中的 `theme.json` 获取。
3. 点击 *发布* 按钮使得程序包可公开使用。
4. 同时，切换至 *设置* 选项卡并设置程序包的 *状态* 到 *已发布* 。

祝贺，若完成以上步骤，你的扩展已经进驻 Pagekit 商城！

## 版本

当你已经完成了一个新版本的扩展和上传的工作，确定已经在 `extension.json` （或 `theme.json`）中添加了
 *版本号* 。否则你可能将会被通知该版本已经存在。

版本号必须遵循一个通用的命名规则，就像 [PHP 文档](http://php.net/version_compare)里的一样。
用于有效版本号的一个简单的（不完全的）正则表达式例子如下：

```
x.x.x(-(pre|beta|RC|alpha))?x?
```

下面的是几个符合要求的版本号示例：`0.0.1`, `1.0.0`, `0.1.2-alpha`, `0.1.2-alpha-2`, `0.1.2-RC2`.
